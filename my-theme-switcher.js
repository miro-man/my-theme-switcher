// my-theme-switcher.js

(function() {
  const themeToggleButton = document.getElementById('theme-toggle'); // ???? ?? ?? ???? ???? HTML ????? 'theme-toggle'
  const currentTheme = localStorage.getItem('theme'); // ??????? ????? ??????? ?? ??????? ??????

  // ????? ????? ??????? ??? ????? ??????
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);
    if (themeToggleButton) {
      themeToggleButton.checked = (currentTheme === 'dark'); // ????? ???? ???? ????? ??? ????? ???????
    }
  } else {
    // ??? ?? ??? ???? ??? ?????? ?????? ????? ????????? (??? 'light')
    document.documentElement.setAttribute('data-theme', 'light');
    if (themeToggleButton) {
      themeToggleButton.checked = false;
    }
  }

  // ????? ????? ??????? ??? ???????
  if (themeToggleButton) {
    themeToggleButton.addEventListener('change', function() {
      if (this.checked) {
        document.documentElement.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark'); // ??? ????? 'dark'
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light'); // ??? ????? 'light'
      }
    });
  }
})();